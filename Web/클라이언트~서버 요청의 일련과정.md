> # TIL - 2021-04-09

## 💡 클라이언트 ~ 서버의 요청, 응답의 과정

<hr/>

### HTTP란?

-  Hypertext Transfer Protocol의 약자로 인터넷 상에서 데이터를 주고 받기 위한 프로토콜이다.
- 데이터는 특별히 종류를 가리지 않고 HTTP 프로토콜을 통해 전달하고 받을 수 있다.

<br/>

> 요청

- 계층의 구분은 model에 따라 다르지만, 크게 

1. Application Layer 에서 데이터를 만들어 주면,
2. Trnasport Layer 에서 통신 노드를 연결하고
3. Network Layer 에서 패킷 전송 및 라우팅을 하고
4. Physical Layer 에서 전기석 신호로서 실제 전달한다.

<br/>
<br/>

> 예시 (/naever.com : GET)

최초 브라우저를 통해 문자 url 을 전달하게 된다. /naever.com

브라우저는 해당 요청을 인지하고 DNS를 통해 url에서 ip를 추출한다.
브라우저는 서버에게서 요청에 대한 결과를 받아오기 위한 일종의 견적서를 만드는데 이것이 바로 Http Message 라고 불리는 데이터 덩어리 이다.

이 메세지에는 어떤 HTTP Method 인지, 어떤 정보를 요청하는 지에 대한 정보가 적혀있다.



최초  클라이언트와 서버는 커넥션을 생성하게 되는데 이때 사용되는 기법은 3-Way 핸드쉐이크 이다.

                3-Way 핸드쉐이크
                1. 클라이언트에서 SYN 패킷을 보내며 통신을 요청.
                2. 서버는 클라이언트측에 OK를 의미하는 ACK패킷과 통신을 요청하는 SYN 패킷을 보냄 (ACK & SYN)
                3. 클라이언트는 다시 서버에 OK를 의미하는 ACK 패킷을 보냄.

3-Way 핸드쉐이크 가 종료되면 커넥션이 맺어지고
클라이언트는 Http Message 를 이용해 HTTP 요청을 보낸다.

서버는 Http Message를 해석하여 어떤 요청인지를 인지하게 된다.
이후 내부 비즈니스 로직을 수행하여 리소스를 찾게 되고
수행이 성공적으로 완료되면 상태코드 200인 응답 메세지를 작성한 후 클라이언트에게 전송한다.

요청에 대한 응답이 왔으니 통신을 종료한다.
통신 종료에는  4-Way 핸드쉐이크를 수행하게 된다.

                4-Way 핸드쉐이크
                1. 서버가 FIN & ACK 를 보내면서 통신 종료를 요청.
                2. 클라이언트는 ACK를 보내면서 OK 
                3. 다시 클라이언트가  FIN & ACK 를 보내면서 통신 종료를 요청.
                4. 서버에서 ACK를 보내면서 OK 


